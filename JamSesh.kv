#:import main kivy

ScreenManagement:
    UserInfoScreen1:
    UserInfoScreen2:
    MainScreenAudience:
    PianoScreen:


<UserInfoScreen1>:
    name: "UserInfoScreen1"
    canvas.before:
        Color:
            rgb: 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
    GridLayout:
        cols: 2
        rows: 2

        GridLayout:
            cols: 1
            rows: 2

            Label:
                text: "Welcome to Jam Sesh! What is your username?"
            TextInput:
                id: username
                hint_text: "Enter username here: "
                multiline: False

        GridLayout:
            cols: 1
            rows: 6
            Label:
                text: "Are you an audience member or a player?"
            CheckBox:
                group: "player_type"
                id: audience_member
                value: root.audience_member

            Label:
                text: "Audience member"
            CheckBox:
                group: "player_type"
                id: player
                value: root.player
            Label:
                text: "Player"
            Button:
                text: "Continue"
                on_press: root.manager.username = username.text; root.manager.current = root.decide_player_or_audience(player.active, audience_member.active)

<UserInfoScreen2>:
    name: "UserInfoScreen2"
    canvas.before:
        Color:
            rgb: 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
    GridLayout:
        cols: 1
        rows: 2
        Label:
            text: "Pick an instrument"
        GridLayout:
            cols: 2
            rows: 4
            Label:
                text: "Piano"
            CheckBox:
                group: "instrument_type"
                id: piano

            Label:
                text: "Guitar"
            CheckBox:
                group: "instrument_type"
                id: guitar

            Label:
                text: "Bass"
            CheckBox:
                group: "instrument_type"
                id: bass

            Button:
                text: "Continue"
                on_press: root.manager.current = root.decide_instrument(piano.active, guitar.active, bass.active) ;


<MainScreenAudience>:
    name: "MainScreenAudience"
    canvas.before:
        Color:
            rgb: 0, 128, 255
        Rectangle:
            pos: self.pos
            size: self.size

    GridLayout:
        cols: 2
        rows: 1
        padding: 10
        spacing: 5

        GridLayout:
            id: layout
            cols: 1
            rows: 3
            padding: 10
            spacing: 5


            Label:
                text: "Jam Sesh"
                font_size: 36
                size_hint: (0.2, None)
                height: 20

            Label:
                text: "Welcome " + root.manager.username + "!"
                size_hint: (0.2, None)
                height: 20

            Label:
                text: "You are an audience member."
                size_hint_y: None
                text_size: self.width, None

        GridLayout:
            id: chatroom_layout
            cols: 1
            rows: 2
            padding: 10
            spacing: 5

            ScrollView:
                Label:
                    id: chatroom
                    text: "Connecting to the chat..."
                    size_hint_y: None
                    height: self.texture_size[1]
                    halight: 'left'
                    valight: 'top'
                    text_size: self.width, None



                    multiline: True
                    color: 0, 0, 0, 1
                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1
                        Rectangle:
                            pos: self.pos
                            size: self.size

            TextInput:
                id: msg_input
                hint_text: "Enter message here:"
                size_hint: (0.5, None)
                height: 100
                font_size: 16
                multiline: False
                on_text_validate: root.send_message(root.manager.username + " " + msg_input.text); msg_input.text = "";

<PianoScreen>:
    name: "PianoScreen"
    canvas.before:
        Color:
            rgb: 0, 128, 255
        Rectangle:
            pos: self.pos
            size: self.size
    GridLayout:
        cols: 2
        rows: 1
        padding: 10
        spacing: 5

        GridLayout:
            id: layout
            cols: 2
            rows: 3
            padding: 10
            spacing: 5


            Label:
                text: "Jam Sesh"
                font_size: 36
                size_hint: (0.2, None)
                height: 20

            Label:
                text: "Welcome " + root.manager.username + "!"
                size_hint: (0.2, None)
                height: 20

            AsyncImage:
                id: piano
                source: 'https://cdn.pixabay.com/photo/2018/01/05/01/52/piano-3061964_960_720.jpg'

            AsyncImage:
                id: guitar
                source: 'http://images.all-free-download.com/images/graphiclarge/acoustic_guitar_184808.jpg'

            AsyncImage:
                id: bass
                source: 'https://medias.audiofanzine.com/images/normal/epiphone-les-paul-special-bass-751621.jpg'

            AsyncImage:
                id: drums
                source: 'http://images.clipartpanda.com/drum-clip-art-drum-clip-art-6.gif'

        GridLayout:
            id: chatroom_layout
            cols: 1
            rows: 2
            padding: 10
            spacing: 5

            ScrollView:
                Label:
                    id: chatroom
                    text: "Connecting to the chat..."
                    size_hint_y: None
                    height: self.texture_size[1]
                    halight: 'left'
                    valight: 'top'
                    text_size: self.width, None



                    multiline: True
                    color: 0, 0, 0, 1
                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1
                        Rectangle:
                            pos: self.pos
                            size: self.size

            TextInput:
                id: msg_input
                hint_text: "Enter message here:"
                size_hint: (0.5, None)
                height: 100
                font_size: 16
                multiline: False
                on_text_validate: root.send_message(root.manager.username + " " + msg_input.text); msg_input.text = "";